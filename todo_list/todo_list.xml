<?xml version="1.0" encoding="UTF-8" ?>
<template>
    <t t-name="to_do_list_owl.todo_list_client_template">
        <div class="container-todo-list mt-3 mx-3"  >
            <div class="row">
                <div class="col-sm-6">
                    <button class="btn btn-primary"  t-on-click="newTask" data-bs-toggle="modal" data-bs-target="#staticBackdrop">New</button>
                </div>
                <div class="col-sm-6">
                    <div class="input-group">
                        <input class="form-control" t-on-keyup="searchTask" t-ref="search-text" placeholder="Search Name ..."/>
                        <button class="btn btn-outline-primary"  t-on-click="searchTask">Search</button>
                    </div>
                </div>
            </div>


            <div class="row mt-3">
                <div class="col">
                        <table class="table   table-striped table-hover">
                        <thead>
                            <tr>
                                <th>name</th>
                                <th>color</th>
                                <th>Completed</th>
                            </tr>
                        </thead>
                        <tbody t-foreach="state.taskList" t-as="task" t-key="task.id">
                            <tr>
                                <td>
                                  <div class="form-check">
                                      <input type="checkbox" t-on-change="(e)=> this.changeCheckTree(e,task)" t-att-checked="task.completed"
                                              class="form-check-input" />
                                      <label class="from-check-label"  t-attf-class="#{task.completed ? 'text-decoration-line-through' : '' }" t-esc="task.name"/>
                                  </div>
                                </td>
                                <td>
                                    <div class="form-check">
                                      <input type="color" t-on-change="(e)=> this.changeColorTree(e,task)" class="form-control form-control-color" t-att-value="task.color" title="choose color"/>
                                  </div>
                                </td>
                                <td>
                                    <button class="btn btn-info me-2" data-bs-toggle="modal" data-bs-target="#staticBackdrop" t-on-click="()=> this.editTask(task)">Edit</button>
                                    <button class="btn btn-danger" t-on-click="()=> this.deleteTask(task)">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Modal title</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">

                    <div class="row align-items-center mb-3">
                        <div class="col-2">
                            <label class="form-label  fw-bold"  for="name">name</label>
                        </div>
                        <div class="col">
                            <input class="form-control" t-model="state.task.name" t-att-value="state.task.name" id="name"/>
                        </div>
                    </div>


                    <div class="row mb-3 align-items-center">
                        <div class="col-2">
                            <label class="form-label fw-bold"  for="color">color</label>
                        </div>
                        <div class="col">
                            <input type="color" t-model="state.task.color" t-att-value="state.task.color" class="form-control form-control-color" id="color"/>
                        </div>
                    </div>

                    <div class="row mb-3">

                       <div class="col-2">
                            <label class="form-check-label fw-bold">completed</label>
                       </div>
                        <div class="col-auto">
                            <input type="checkbox" class="form-input-check" t-model="state.task.completed" t-att-value="state.task.completed"/>
                       </div>

                  </div>

                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" t-on-click="saveTask">Save</button>
                  </div>
                </div>
              </div>
            </div>
        </div>
        </div>
    </t>
</template>